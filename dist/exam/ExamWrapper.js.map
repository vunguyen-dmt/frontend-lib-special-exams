{"version":3,"file":"ExamWrapper.js","names":["ExamWrapper","children","props","state","useContext","ExamStateContext","AppContext","authenticatedUser","sequence","courseId","isStaff","originalUserIsStaff","canAccessProctoredExams","getExamAttemptsData","getAllowProctoringOptOut","loadInitialData","id","allowProctoringOptOut","isGated","gatedContent","undefined","gated","useEffect","isTimeLimited","propTypes","PropTypes","shape","string","isRequired","bool","element","defaultProps"],"sources":["../../src/exam/ExamWrapper.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport PropTypes from 'prop-types';\nimport Exam from './Exam';\nimport ExamStateContext from '../context';\n\n/**\n * Exam wrapper is responsible for triggering initial exam data fetching and rendering Exam.\n */\nconst ExamWrapper = ({ children, ...props }) => {\n  const state = useContext(ExamStateContext);\n  const { authenticatedUser } = useContext(AppContext);\n  const {\n    sequence,\n    courseId,\n    isStaff,\n    originalUserIsStaff,\n    canAccessProctoredExams,\n  } = props;\n  const { getExamAttemptsData, getAllowProctoringOptOut } = state;\n  const loadInitialData = async () => {\n    await getExamAttemptsData(courseId, sequence.id);\n    await getAllowProctoringOptOut(sequence.allowProctoringOptOut);\n  };\n\n  const isGated = sequence && sequence.gatedContent !== undefined && sequence.gatedContent.gated;\n\n  // if the user is browsing public content (not logged in) they cannot be in an exam\n  // if the user is staff they may view exam content without an exam attempt\n  // any requests for exam state will 403 so just short circuit this component here\n  if (!authenticatedUser || isStaff) {\n    return children;\n  }\n\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n\n  return (\n    <Exam\n      isGated={isGated}\n      isTimeLimited={sequence.isTimeLimited}\n      originalUserIsStaff={originalUserIsStaff}\n      canAccessProctoredExams={canAccessProctoredExams}\n    >\n      {children}\n    </Exam>\n  );\n};\n\nExamWrapper.propTypes = {\n  sequence: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    isTimeLimited: PropTypes.bool,\n    allowProctoringOptOut: PropTypes.bool,\n    gatedContent: PropTypes.shape({\n      gated: PropTypes.bool,\n    }),\n  }).isRequired,\n  courseId: PropTypes.string.isRequired,\n  children: PropTypes.element.isRequired,\n  isStaff: PropTypes.bool,\n  originalUserIsStaff: PropTypes.bool,\n  canAccessProctoredExams: PropTypes.bool,\n};\n\nExamWrapper.defaultProps = {\n  isStaff: false,\n  originalUserIsStaff: false,\n  canAccessProctoredExams: true,\n};\n\nexport default ExamWrapper;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAA0C;AAAA;AAAA;AAAA;AAAA,+CAH1C;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA,IAAMA,WAAW,GAAG,SAAdA,WAAW,OAA+B;EAAA,IAAzBC,QAAQ,QAARA,QAAQ;IAAKC,KAAK;EACvC,IAAMC,KAAK,GAAG,IAAAC,iBAAU,EAACC,oBAAgB,CAAC;EAC1C,kBAA8B,IAAAD,iBAAU,EAACE,kBAAU,CAAC;IAA5CC,iBAAiB,eAAjBA,iBAAiB;EACzB,IACEC,QAAQ,GAKNN,KAAK,CALPM,QAAQ;IACRC,QAAQ,GAINP,KAAK,CAJPO,QAAQ;IACRC,OAAO,GAGLR,KAAK,CAHPQ,OAAO;IACPC,mBAAmB,GAEjBT,KAAK,CAFPS,mBAAmB;IACnBC,uBAAuB,GACrBV,KAAK,CADPU,uBAAuB;EAEzB,IAAQC,mBAAmB,GAA+BV,KAAK,CAAvDU,mBAAmB;IAAEC,wBAAwB,GAAKX,KAAK,CAAlCW,wBAAwB;EACrD,IAAMC,eAAe;IAAA,uEAAG;MAAA;QAAA;UAAA;YAAA;YAAA,OAChBF,mBAAmB,CAACJ,QAAQ,EAAED,QAAQ,CAACQ,EAAE,CAAC;UAAA;YAAA;YAAA,OAC1CF,wBAAwB,CAACN,QAAQ,CAACS,qBAAqB,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA,CAC/D;IAAA,gBAHKF,eAAe;MAAA;IAAA;EAAA,GAGpB;EAED,IAAMG,OAAO,GAAGV,QAAQ,IAAIA,QAAQ,CAACW,YAAY,KAAKC,SAAS,IAAIZ,QAAQ,CAACW,YAAY,CAACE,KAAK;;EAE9F;EACA;EACA;EACA,IAAI,CAACd,iBAAiB,IAAIG,OAAO,EAAE;IACjC,OAAOT,QAAQ;EACjB;EAEA,IAAAqB,gBAAS,EAAC,YAAM;IACdP,eAAe,EAAE;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE,gCAAC,gBAAI;IACH,OAAO,EAAEG,OAAQ;IACjB,aAAa,EAAEV,QAAQ,CAACe,aAAc;IACtC,mBAAmB,EAAEZ,mBAAoB;IACzC,uBAAuB,EAAEC;EAAwB,GAEhDX,QAAQ,CACJ;AAEX,CAAC;AAEDD,WAAW,CAACwB,SAAS,GAAG;EACtBhB,QAAQ,EAAEiB,qBAAS,CAACC,KAAK,CAAC;IACxBV,EAAE,EAAES,qBAAS,CAACE,MAAM,CAACC,UAAU;IAC/BL,aAAa,EAAEE,qBAAS,CAACI,IAAI;IAC7BZ,qBAAqB,EAAEQ,qBAAS,CAACI,IAAI;IACrCV,YAAY,EAAEM,qBAAS,CAACC,KAAK,CAAC;MAC5BL,KAAK,EAAEI,qBAAS,CAACI;IACnB,CAAC;EACH,CAAC,CAAC,CAACD,UAAU;EACbnB,QAAQ,EAAEgB,qBAAS,CAACE,MAAM,CAACC,UAAU;EACrC3B,QAAQ,EAAEwB,qBAAS,CAACK,OAAO,CAACF,UAAU;EACtClB,OAAO,EAAEe,qBAAS,CAACI,IAAI;EACvBlB,mBAAmB,EAAEc,qBAAS,CAACI,IAAI;EACnCjB,uBAAuB,EAAEa,qBAAS,CAACI;AACrC,CAAC;AAED7B,WAAW,CAAC+B,YAAY,GAAG;EACzBrB,OAAO,EAAE,KAAK;EACdC,mBAAmB,EAAE,KAAK;EAC1BC,uBAAuB,EAAE;AAC3B,CAAC;AAAC,eAEaZ,WAAW;AAAA"}